[circus]
check_delay = 5
endpoint = ${options['endpoint']}
logoutput = ${parts.buildout.directory}/var/log/circus.log
statsd = ${options['statsd']}
umask=002

[watcher:db]
cmd = couchdb
args = -a ${parts.buildout.directory}/etc/couchdb.ini
stdout_stream.class = FileStream
stderr_stream.filename = ${parts.buildout.directory}/var/log/couchdb.stderr.log

[env:db]
HOME = ${parts.buildout.directory}/var

{% if options['penstock'] %}
[watcher:penstock]
cmd = ${parts.buildout.directory}/bin/penstock  ${parts.buildout.directory}/etc/penstock.yaml
numprocesses = 1
priority = 50
stdout_stream.class = FileStream
stderr_stream.class = FileStream
stdout_stream.filename = ${parts.buildout.directory}/var/log/penstock.stdout.log
stderr_stream.filename = ${parts.buildout.directory}/var/log/penstock.stderr.log
{% if 'log_size' in options %}
stdout_stream.max_bytes = ${options['log_size']}
stderr_stream.max_bytes = ${options['log_size']}
{% end %}
{% if 'backup_count' in options %}
stdout_stream.backup_count = ${options['backup_count']}
stderr_stream.backup_count = ${options['backup_count']}
{% end %}
{% end %}
